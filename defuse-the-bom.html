<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Defuse the BOM</title>
</head>
<style>@import url(https://fonts.googleapis.com/css?family=Advent+Pro:100);

html {
  background: url(https://media.giphy.com/media/dupLB4LFfK7m5dmfkA/giphy.gif) no-repeat center center fixed;
  background-size: cover;
}

h1 {
  font-family: 'Advent Pro', sans-serif;
  font-size: 3em;
  margin: .2em .5em;
  color: white;
}

body {
  height: 100%;
}
#timer {
  background:red;
}

</style>
<body>


<h1 id="message">This BOM will self destruct in <span id="timer">5</span> seconds...</h1>
<button id="defuser">Defuse the BOM</button>
<audio src="audio/exterminate.mp3" id="my_audio" loop="loop"></audio>

<script>

  (function () {
    "use strict";

    let detonationTimer = 5;
    let interval = 1000;

    // TODO: This function needs to be called once every second
    let updateTimer = setInterval(function () {
      if (detonationTimer <= 0) {
        alert('EXTERMINATE!');
        document.body.innerHTML = '';
      } else if (detonationTimer > 0) {
        document.getElementById('timer').innerHTML = detonationTimer;
      }

      detonationTimer--;
    }, interval);

    // TODO: When this function runs, it needs to
    // cancel the interval/timeout for updateTimer()


    function defuseTheBOM() {
      return clearInterval(updateTimer);
    }

    // Don't modify anything below this line!
    //
    // This causes the defuseTheBOM() function to be called
    // when the "defuser" button is clicked.
    // We will learn about events in the DOM lessons
    let defuser = document.getElementById('defuser');
    defuser.addEventListener('click', defuseTheBOM);
    setTimeout(function(){
      document.getElementById("my_audio").play();
      console.log('your audio is started just now');
    }, 5000)

  })();
</script>
</body>
</html>


<!-- clearInterval(setInterval)-->
